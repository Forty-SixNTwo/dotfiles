#!/usr/bin/env zsh

##  '########::'######::'##::::'##:'########:::'######::
##  ..... ##::'##... ##: ##:::: ##: ##.... ##:'##... ##:
##  :::: ##::: ##:::..:: ##:::: ##: ##:::: ##: ##:::..::
##  ::: ##::::. ######:: #########: ########:: ##:::::::
##  :: ##::::::..... ##: ##.... ##: ##.. ##::: ##:::::::
##  : ##::::::'##::: ##: ##:::: ##: ##::. ##:: ##::: ##:
##   ########:. ######:: ##:::: ##: ##:::. ##:. ######::
##  ........:::......:::..:::::..::..:::::..:::......:::
##  ####################################################

# Variables
export DOTFILES=$HOME/.dotfiles
export HOMEBREW_CASK_OPTS="--no-quarantine --no-binaries"
export HISTTIMEFORMAT="[%F %T] "
export HISTFILE=$HOME/.zsh_history
export HISTSIZE=5000 
export SAVEHIST=4000
export ZSH=$HOME/.oh-my-zsh
export ZSH_SH=$ZSH/oh-my-zsh.sh
export ZSH_SYNTAX_HIGHLIGHTING=$HOME/.themes/zsh-syntax-highlighting.sh
export FZF_DEFAULT_OPTS='--color=fg:#f8f8f2,bg:#282a36,hl:#bd93f9 --color=fg+:#f8f8f2,bg+:#44475a,hl+:#bd93f9 --color=info:#ffb86c,prompt:#50fa7b,pointer:#ff79c6 --color=marker:#ff79c6,spinner:#ffb86c,header:#6272a4'
export FZF_DEFAULT_COMMAND='fd --type f --hidden --follow --exclude .git --exclude node_modules --exclude .cache'
export RUST_CARGO=$HOME/.cargo/env
export COLORLS=$(dirname $(gem which colorls))/tab_complete.sh

# Oh My ZSH
ZSH_THEME="dracula"

plugins=(
  git
  zsh-syntax-highlighting
  zsh-autosuggestions
)

source $ZSH_SH
source $ZSH_SYNTAX_HIGHLIGHTING
source $COLORLS
. $RUST_CARGO

# Adjust History Variables & Options
unsetopt APPEND_HISTORY
setopt INC_APPEND_HISTORY
setopt HIST_NO_STORE
setopt EXTENDED_HISTORY
setopt HIST_IGNORE_ALL_DUPS
setopt HIST_FIND_NO_DUPS
setopt AUTO_CD
setopt GLOB_DOTS
setopt EXTENDED_GLOB
setopt NO_HUP
setopt NOTIFY
setopt CORRECT

# Create Aliases
alias lc='colorls -lA --sd --dark'
alias ls='eza'
alias eza='eza -laFh --git'
alias trail='<<<${(F)path}'
alias ftrail='<<<${(F)fpath}'
alias rm=trash
alias man=batman
alias bbd="brew bundle dump --force --describe"
alias lh='fc -RI; echo "loaded and showing..."; history;'
alias go_shim='asdf reshim golang'

# Paths 
typeset -U path

path=(
  $path
  "/Applications/Visual Studio Code.app/Contents/Resources/app/bin"
  "/Users/fortysix-ntwo/Library/Python/3.9/bin"
)

# Functions
function mkcd() {
  mkdir -p "$@" && cd "$_";
}

# Plugins
ZSH_AUTOSUGGEST_STRATEGY=(history completion)

# Load "New" Completion System
zstyle ':completion:*:*:*:*:*' menu select
zstyle ':completion:*' matcher-list 'm:{a-z}={A-Z}'
zstyle ':plugin:history-search-multi-word' clear-on-cancel 'yes'
autoload -Uz compinit && compinit

# prompt(s)
eval "$(starship init zsh)"

eval $(thefuck --alias)

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
